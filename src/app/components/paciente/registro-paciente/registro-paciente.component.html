<mat-card class="registro-container">
  <mat-card-title>Registro de Paciente</mat-card-title>
  <form [formGroup]="registroPacienteForm" (ngSubmit)="onSubmit()">

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="nombre" placeholder="Ingresa tu nombre" />
      <mat-error *ngIf="registroPacienteForm.get('nombre')?.hasError('required')">
        El nombre es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Apellido</mat-label>
      <input matInput formControlName="apellido" placeholder="Ingresa tu apellido" />
      <mat-error *ngIf="registroPacienteForm.get('apellido')?.hasError('required')">
        El apellido es obligatorio.
      </mat-error>
    </mat-form-field>

    <!-- Fecha de Nacimiento -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Fecha de nacimiento</mat-label>
      <input matInput type="date" formControlName="fechaNacimiento" [min]="minDateISO" [max]="maxDateISO"
        placeholder="YYYY-MM-DD" />
      <mat-error *ngIf="registroPacienteForm.get('fechaNacimiento')?.hasError('required')">
        La fecha de nacimiento es obligatoria.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('fechaNacimiento')?.hasError('formato')">
        Formato inválido (usa AAAA-MM-DD).
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('fechaNacimiento')?.hasError('futuro')">
        La fecha no puede ser futura.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('fechaNacimiento')?.hasError('rango')">
        Verifica la fecha (edad fuera de rango).
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>DNI</mat-label>
      <input matInput formControlName="dni" placeholder="Ingresa tu DNI" />
      <mat-error *ngIf="registroPacienteForm.get('dni')?.hasError('required')">
        El DNI es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Obra Social</mat-label>
      <input matInput formControlName="obraSocial" placeholder="Ingresa tu obra social" />
      <mat-error *ngIf="registroPacienteForm.get('obraSocial')?.hasError('required')">
        La obra social es obligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Correo Electrónico</mat-label>
      <input matInput type="email" formControlName="email" placeholder="Ingresa tu correo" />
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('required')">
        El correo es obligatorio.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('email')">
        Formato inválido.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contraseña</mat-label>
      <input matInput type="password" formControlName="password" placeholder="Ingresa tu contraseña" />
      <mat-error *ngIf="registroPacienteForm.get('password')?.hasError('required')">
        La contraseña es obligatoria.
      </mat-error>
    </mat-form-field>

<<<<<<< HEAD:src/app/components/paciente/registro-paciente/registro-paciente.component.html

      <!-- <label class="mt-2">Validación anti‑bots</label>
      <div
        appCaptcha
        [appCaptchaEnabled]="captchaEnabled"
        (appCaptchaSolved)="onCaptcha($event)"
        [formControl]="registroPacienteForm.controls.captcha">
      </div>
      <div class="error" *ngIf="registroPacienteForm.controls.captcha.invalid && registroPacienteForm.controls.captcha.touched">
        Responda correctamente el captcha.
      </div> -->

    <button mat-raised-button color="accent" class="full-width" [disabled]="loading || registroPacienteForm.invalid"
      type="submit">
=======
    <!-- Imágenes de perfil -->
    <div class="full-width file-group">
      <button mat-raised-button color="primary" type="button" (click)="fileInput1.click()">
        Seleccionar Imagen 1
      </button>
      <input #fileInput1 type="file" hidden (change)="onFileChange($event, 1)" accept="image/*" />
      <mat-error
        *ngIf="registroPacienteForm.get('imagenPerfil1')?.hasError('required') && registroPacienteForm.get('imagenPerfil1')?.touched">
        La primera imagen es obligatoria.
      </mat-error>
      <div class="preview" *ngIf="imagenPrevia1">
        <img [src]="imagenPrevia1" alt="Previsualización 1" />
      </div>
    </div>

    <div class="full-width file-group">
      <button mat-raised-button color="primary" type="button" (click)="fileInput2.click()">
        Seleccionar Imagen 2
      </button>
      <input #fileInput2 type="file" hidden (change)="onFileChange($event, 2)" accept="image/*" />
      <mat-error
        *ngIf="registroPacienteForm.get('imagenPerfil2')?.hasError('required') && registroPacienteForm.get('imagenPerfil2')?.touched">
        La segunda imagen es obligatoria.
      </mat-error>
      <div class="preview" *ngIf="imagenPrevia2">
        <img [src]="imagenPrevia2" alt="Previsualización 2" />
      </div>
    </div>

    <!-- Captcha -->
    <!-- <app-captcha [enabled]="captchaEnabled" (captchaValid)="onCaptchaValid($event)">
    </app-captcha> -->

    <!-- <div class="captcha-wrapper">
      <app-captcha-imagen (captchaValido)="onCaptchaValido($event)"></app-captcha-imagen>
    </div> -->

    <!-- <button mat-raised-button color="accent" class="full-width"
      [disabled]="loading || registroPacienteForm.invalid || !captchaValido" type="submit">
>>>>>>> 1-6-mas-estilos:src/app/components/registro-paciente/registro-paciente.component.html
      {{ loading ? 'Registrando...' : 'Registrarse' }}
    </button> -->


    <button mat-raised-button color="primary" type="submit" [disabled]="registroPacienteForm.invalid">
      Registrarse
    </button>

  </form>

</mat-card>




<!-- <mat-card class="registro-container">
  <mat-card-title>Registro de Paciente</mat-card-title>
  <form [formGroup]="registroPacienteForm" (ngSubmit)="onSubmit()">

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="nombre" placeholder="Ingresa tu nombre" />
      <mat-error *ngIf="registroPacienteForm.get('nombre')?.hasError('required')">
        El nombre es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Apellido</mat-label>
      <input matInput formControlName="apellido" placeholder="Ingresa tu apellido" />
      <mat-error *ngIf="registroPacienteForm.get('apellido')?.hasError('required')">
        El apellido es obligatorio.
      </mat-error>
    </mat-form-field>

     Fecha de Nacimiento 
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Fecha de nacimiento</mat-label>
      <input
        matInput
        type="date"
        formControlName="fechaNacimiento"
        [min]="minDateISO"
        [max]="maxDateISO"
        placeholder="YYYY-MM-DD" />
      <mat-error *ngIf="registroPacienteForm.get('fechaNacimiento')?.hasError('required')">
        La fecha de nacimiento es obligatoria.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('fechaNacimiento')?.hasError('formato')">
        Formato inválido (usa AAAA-MM-DD).
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('fechaNacimiento')?.hasError('futuro')">
        La fecha no puede ser futura.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('fechaNacimiento')?.hasError('rango')">
        Verifica la fecha (edad fuera de rango).
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>DNI</mat-label>
      <input matInput formControlName="dni" placeholder="Ingresa tu DNI" />
      <mat-error *ngIf="registroPacienteForm.get('dni')?.hasError('required')">
        El DNI es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Obra Social</mat-label>
      <input matInput formControlName="obraSocial" placeholder="Ingresa tu obra social" />
      <mat-error *ngIf="registroPacienteForm.get('obraSocial')?.hasError('required')">
        La obra social es obligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Correo Electrónico</mat-label>
      <input matInput type="email" formControlName="email" placeholder="Ingresa tu correo" />
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('required')">
        El correo es obligatorio.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('email')">
        Formato inválido.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contraseña</mat-label>
      <input matInput type="password" formControlName="password" placeholder="Ingresa tu contraseña" />
      <mat-error *ngIf="registroPacienteForm.get('password')?.hasError('required')">
        La contraseña es obligatoria.
      </mat-error>
    </mat-form-field>

    <button mat-raised-button color="accent" class="full-width"
            [disabled]="loading || registroPacienteForm.invalid" type="submit">
      {{ loading ? 'Registrando...' : 'Registrarse' }}
    </button>
  </form>
</mat-card> -->






<!-- 

<mat-card class="registro-container">
  <mat-card-title>Registro de Paciente</mat-card-title>
  <form [formGroup]="registroPacienteForm" (ngSubmit)="onSubmit()">
    
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="nombre" placeholder="Ingresa tu nombre" />
      <mat-error *ngIf="registroPacienteForm.get('nombre')?.hasError('required')">
        El nombre es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Apellido</mat-label>
      <input matInput formControlName="apellido" placeholder="Ingresa tu apellido" />
      <mat-error *ngIf="registroPacienteForm.get('apellido')?.hasError('required')">
        El apellido es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Edad</mat-label>
      <input matInput type="number" formControlName="edad" placeholder="Ingresa tu edad" />
      <mat-error *ngIf="registroPacienteForm.get('edad')?.hasError('required')">
        La edad es obligatoria.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('edad')?.hasError('min')">
        La edad debe ser ≥ 0.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>DNI</mat-label>
      <input matInput formControlName="dni" placeholder="Ingresa tu DNI" />
      <mat-error *ngIf="registroPacienteForm.get('dni')?.hasError('required')">
        El DNI es obligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Obra Social</mat-label>
      <input matInput formControlName="obraSocial" placeholder="Ingresa tu obra social" />
      <mat-error *ngIf="registroPacienteForm.get('obraSocial')?.hasError('required')">
        La obra social es obligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Correo Electrónico</mat-label>
      <input matInput type="email" formControlName="email" placeholder="Ingresa tu correo" />
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('required')">
        El correo es obligatorio.
      </mat-error>
      <mat-error *ngIf="registroPacienteForm.get('email')?.hasError('email')">
        Formato inválido.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contraseña</mat-label>
      <input matInput type="password" formControlName="password" placeholder="Ingresa tu contraseña" />
      <mat-error *ngIf="registroPacienteForm.get('password')?.hasError('required')">
        La contraseña es obligatoria.
      </mat-error>
    </mat-form-field> 
    File inputs
    <div class="full-width file-group">
      <button mat-raised-button color="primary" type="button" (click)="fileInput1.click()">
        Seleccionar Imagen 1
      </button>
      <input #fileInput1 type="file" hidden (change)="onFileChange($event, 1)" accept="image/*" />
      <div class="preview" *ngIf="imagenPrevia1">
        <img [src]="imagenPrevia1" alt="Previsualización 1" />
      </div>
    </div>

    <div class="full-width file-group">
      <button mat-raised-button color="primary" type="button" (click)="fileInput2.click()">
        Seleccionar Imagen 2
      </button>
      <input #fileInput2 type="file" hidden (change)="onFileChange($event, 2)" accept="image/*" />
      <div class="preview" *ngIf="imagenPrevia2">
        <img [src]="imagenPrevia2" alt="Previsualización 2" />
      </div>
    </div> 

    <button mat-raised-button color="accent" class="full-width" [disabled]="registroPacienteForm.invalid" type="submit">
      Registrarse
    </button>
  </form>
</mat-card> -->




<!-- <div class="contenedor-registro">
  <h3>Registro</h3>

  <input type="email" placeholder="Correo electrónico"
         [(ngModel)]="formulario.email" class="campo-registro" />
  <input type="password" placeholder="Contraseña"
         [(ngModel)]="formulario.contrasenia" class="campo-registro" />

  <input type="text" placeholder="Nombre"
         [(ngModel)]="formulario.nombre" class="campo-registro" />
  <input type="text" placeholder="Apellido"
         [(ngModel)]="formulario.apellido" class="campo-registro" />
  <input type="date" placeholder="Fecha de nacimiento"
         [(ngModel)]="formulario.fechaNacimiento" class="campo-registro" />

  <button (click)="registrarse()" class="boton-registro" [disabled]="cargando">
    {{ cargando ? 'Registrando…' : 'Registrarse' }}
  </button>

  <p *ngIf="mensajeInformativo" class="mensaje-info">{{ mensajeInformativo }}</p>
  <p *ngIf="mensajeDeError" class="mensaje-error">{{ mensajeDeError }}</p>

  <div class="contenedor-enlace-inicio">
    <a routerLink="/login" class="enlace-inicio">Iniciar sesión</a>
  </div>
</div> -->



<!-- <mat-card class="registro-container">
  <mat-card-title>Registro de Paciente</mat-card-title>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">

   MAT-FORM-FIELD 

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="nombre" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Apellido</mat-label>
      <input matInput formControlName="apellido" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>DNI</mat-label>
      <input matInput formControlName="dni" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Obra Social</mat-label>
      <input matInput formControlName="obraSocial" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Fecha de nacimiento</mat-label>
      <input matInput type="date" formControlName="fechaNacimiento" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Correo Electrónico</mat-label>
      <input matInput type="email" formControlName="email" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contraseña</mat-label>
      <input matInput type="password" formControlName="password" />
    </mat-form-field>

    <div class="full-width file-group">
      <button mat-raised-button type="button" color="primary" (click)="file1.click()">
        Seleccionar Imagen 1
      </button>
      <input #file1 type="file" hidden (change)="onFileChange($event,1)" accept="image/*" />
      <div class="preview" *ngIf="imgPrev1"><img [src]="imgPrev1" alt="Img 1" /></div>
    </div>

    <div class="full-width file-group">
      <button mat-raised-button type="button" color="primary" (click)="file2.click()">
        Seleccionar Imagen 2
      </button>
      <input #file2 type="file" hidden (change)="onFileChange($event,2)" accept="image/*" />
      <div class="preview" *ngIf="imgPrev2"><img [src]="imgPrev2" alt="Img 2" /></div>
    </div>

     USAR: form?.invalid y loading como candados 
    <button mat-raised-button color="accent" class="full-width" [disabled]="form?.invalid || loading" type="submit">
      Registrarse
    </button>
  </form>
</mat-card>





<mat-card class="registro-container">
  <mat-card-title>Registro de Paciente</mat-card-title>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="nombre" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Apellido</mat-label>
      <input matInput formControlName="apellido" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>DNI</mat-label>
      <input matInput formControlName="dni" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Obra Social</mat-label>
      <input matInput formControlName="obraSocial" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Fecha de nacimiento</mat-label>
      <input matInput type="date" formControlName="fechaNacimiento" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Correo Electrónico</mat-label>
      <input matInput type="email" formControlName="email" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contraseña</mat-label>
      <input matInput type="password" formControlName="password" />
    </mat-form-field>

    <div class="full-width file-group">
      <button mat-raised-button type="button" color="primary" (click)="file1.click()">Seleccionar Imagen 1</button>
      <input #file1 type="file" hidden (change)="onFileChange($event,1)" accept="image/*" />
      <div class="preview" *ngIf="imgPrev1"><img [src]="imgPrev1" alt="Img 1" /></div>
    </div>

    <div class="full-width file-group">
      <button mat-raised-button type="button" color="primary" (click)="file2.click()">Seleccionar Imagen 2</button>
      <input #file2 type="file" hidden (change)="onFileChange($event,2)" accept="image/*" />
      <div class="preview" *ngIf="imgPrev2"><img [src]="imgPrev2" alt="Img 2" /></div>
    </div>

    <button mat-raised-button color="accent" class="full-width" [disabled]="form.invalid" type="submit">
      Registrarse
    </button>
  </form>
</mat-card>




<mat-card class="registro-container">
  <mat-card-title>Registro de Paciente</mat-card-title>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <mat-grid-list cols="2" rowHeight="auto" gutterSize="16px">
   
      <mat-grid-tile colspan="1">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nombre</mat-label>
          <input matInput formControlName="nombre" />
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile colspan="1">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Apellido</mat-label>
          <input matInput formControlName="apellido" />
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile colspan="1">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>DNI</mat-label>
          <input matInput formControlName="dni" />
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile colspan="1">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Obra Social</mat-label>
          <input matInput formControlName="obraSocial" />
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile colspan="1">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Fecha de nacimiento</mat-label>
          <input matInput type="date" formControlName="fechaNacimiento" />
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile colspan="1">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Correo Electrónico</mat-label>
          <input matInput type="email" formControlName="email" />
        </mat-form-field>
      </mat-grid-tile>

      <mat-grid-tile colspan="2">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Contraseña</mat-label>
          <input matInput type="password" formControlName="password" />
        </mat-form-field>
      </mat-grid-tile>
    </mat-grid-list>

    <div class="file-section">
      <button mat-raised-button color="primary" type="button" (click)="file1.click()">Seleccionar Imagen 1</button>
      <input #file1 type="file" hidden (change)="onFileChange($event,1)" accept="image/*" />
      <div class="preview" *ngIf="imgPrev1"><img [src]="imgPrev1" alt="Img 1" /></div>

      <button mat-raised-button color="primary" type="button" (click)="file2.click()">Seleccionar Imagen 2</button>
      <input #file2 type="file" hidden (change)="onFileChange($event,2)" accept="image/*" />
      <div class="preview" *ngIf="imgPrev2"><img [src]="imgPrev2" alt="Img 2" /></div>
    </div>

    <button mat-raised-button color="accent" class="full-width" [disabled]="form.invalid" type="submit">
      Registrarse
    </button>

  </form>
</mat-card> -->